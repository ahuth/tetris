(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(9),c=n.n(o),i=(n(16),n(3));function u(e){var t=e.color,n=a.a.useMemo(function(){return function(e){return{backgroundColor:e}}(t)},[t]);return a.a.createElement("div",{style:n})}var l=n(2),s=n(6);function f(e,t){return{x:e,y:t}}var b,d,v,O,p,j,h,m,g=n(10),w=n(1),y={L:"L",I:"I",T:"T",S:"S",Z:"Z",O:"O",J:"J"},E={Up:0,Right:1,Down:2,Left:3};function x(e){return{type:e,orientation:E.Up}}function k(e){return L[e.type][e.orientation]}var L=(m={},Object(w.a)(m,y.L,(b={},Object(w.a)(b,E.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(w.a)(b,E.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(w.a)(b,E.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(w.a)(b,E.Left,[[1,1,0],[0,1,0],[0,1,0]]),b)),Object(w.a)(m,y.I,(d={},Object(w.a)(d,E.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(w.a)(d,E.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(w.a)(d,E.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(w.a)(d,E.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),d)),Object(w.a)(m,y.T,(v={},Object(w.a)(v,E.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(w.a)(v,E.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(w.a)(v,E.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(w.a)(v,E.Left,[[0,1,0],[1,1,0],[0,1,0]]),v)),Object(w.a)(m,y.S,(O={},Object(w.a)(O,E.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(w.a)(O,E.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(w.a)(O,E.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(w.a)(O,E.Left,[[1,0,0],[1,1,0],[0,1,0]]),O)),Object(w.a)(m,y.Z,(p={},Object(w.a)(p,E.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(w.a)(p,E.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(w.a)(p,E.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(w.a)(p,E.Left,[[0,1,0],[1,1,0],[1,0,0]]),p)),Object(w.a)(m,y.O,(j={},Object(w.a)(j,E.Up,[[1,1],[1,1]]),Object(w.a)(j,E.Right,[[1,1],[1,1]]),Object(w.a)(j,E.Down,[[1,1],[1,1]]),Object(w.a)(j,E.Left,[[1,1],[1,1]]),j)),Object(w.a)(m,y.J,(h={},Object(w.a)(h,E.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(w.a)(h,E.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(w.a)(h,E.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(w.a)(h,E.Left,[[0,1,0],[0,1,0],[1,1,0]]),h)),m);function R(){return Object(s.shuffle)(Object.keys(y))}function D(e){var t=Object(g.a)(e),n=t[0],r=t.slice(1);return r.length>0?[n,r]:[n,R()]}function M(e,t){var n=Object(s.fill)(new Array(e*t),0,0);return{columns:t,fill:n,length:n.length}}function S(e,t,n,r){for(var a=k(t),o=function(e){return Object(l.a)({},e,{fill:e.fill.slice()})}(e),c=0;c<a.length;c++)for(var i=0;i<a[c].length;i++){if(0!==a[c][i])J(o,I(e,f(n.x+i,n.y+c)),r)}return o}function U(e,t,n){var r=f(n.x-1,n.y);return A(e,t,r)?r:n}function P(e,t,n){var r=f(n.x+1,n.y);return A(e,t,r)?r:n}function T(e,t,n){var r=function(e){return Object(l.a)({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}(t);return A(e,r,n)?r:t}function A(e,t,n){for(var r=k(t),a=e.columns-1,o=e.length/e.columns-1,c=0;c<r.length;c++)for(var i=0;i<r[c].length;i++)if(0!==r[c][i]){if(n.x+i<0||n.x+i>a)return!1;if(n.y+c<0||n.y+c>o)return!1;if(1===C(e,I(e,f(n.x+i,n.y+c))))return!1}return!0}function I(e,t){return t.x+t.y*e.columns}function C(e,t){return e.fill[t]}function J(e,t,n){e.fill[t]=n}function z(e){var t=e.board,n=e.colors,r=e.current,o=e.height,c=e.position,i=e.width,l=a.a.useMemo(function(){return function(e,t,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:n}}(t.columns,o,i)},[t.columns,o,i]),s=S(t,r,c,2);return a.a.createElement("div",{style:l},function(e,t){return e.fill.map(t)}(s,function(e,t){return a.a.createElement(u,{color:n[e],key:"".concat(t,"-").concat(e)})}))}function Z(e){var t=e.board,n=e.children,r=e.current,o=e.position;return a.a.createElement("div",{style:W.container},a.a.createElement(z,{board:t,colors:B,current:r,height:400,position:o,width:200}),n)}var B={0:"black",1:"dodgerblue",2:"limegreen"},W={container:{position:"relative"}},q=M(5,5),F=f(1,1);function G(e){var t=e.next;return a.a.createElement(z,{board:q,colors:H,current:t,height:100,position:F,width:100})}var H={0:"black",1:"dodgerblue",2:"yellow"};function K(e){var t=e.children,n=e.level,r=e.next,o=e.score;return a.a.createElement("div",null,a.a.createElement(G,{next:r}),a.a.createElement("div",null,"Level: ",n),a.a.createElement("div",null,"Score: ",o),a.a.createElement("div",null,t))}var N=D(R()),Q=Object(i.a)(N,2),V=Q[0],X=D(Q[1]),Y=Object(i.a)(X,2),$=Y[0],_=Y[1],ee={Paused:0,Playing:1,Won:2,Lost:3},te={MoveDown:"down",MoveLeft:"left",MoveRight:"right",Reset:"reset",Rotate:"rotate",Start:"start",Stop:"stop",Tick:"tick"},ne={board:M(20,10),current:x(V),interval:750,level:1,next:x($),position:f(3,0),randomizer:_,score:0,state:ee.Paused};function re(e,t){switch(t){case te.Tick:case te.MoveDown:var n=function(e,t,n,r,a){var o=f(r.x,r.y+1);if(A(e,t,o))return[e,t,n,o,a];var c=S(e,t,r,1),u=D(a),l=Object(i.a)(u,2),s=l[0],b=l[1];return[c,n,x(s),f(3,0),b]}(e.board,e.current,e.next,e.position,e.randomizer),r=Object(i.a)(n,5),a=r[0],o=r[1],c=r[2],u=r[3],s=r[4];return Object(l.a)({},e,{board:a,current:o,next:c,position:u,randomizer:s});case te.MoveLeft:return Object(l.a)({},e,{position:U(e.board,e.current,e.position)});case te.MoveRight:return Object(l.a)({},e,{position:P(e.board,e.current,e.position)});case te.Rotate:return Object(l.a)({},e,{current:T(e.board,e.current,e.position)});case te.Start:return Object(l.a)({},e,{state:ee.Playing});case te.Stop:return Object(l.a)({},e,{state:ee.Paused});default:return e}}function ae(e){var t=e.dispatch,n=e.state;return a.a.createElement("div",{style:oe.container},a.a.createElement(Z,{board:n.board,current:n.current,position:n.position},a.a.createElement("span",{style:oe.text},"Paused")),a.a.createElement(K,{level:n.level,next:n.next,score:n.score},a.a.createElement("button",{onClick:function(){return t(te.Start)}},"Start")))}var oe={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function ce(e,t){a.a.useEffect(function(){function n(n){n.key===e&&t(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[e])}function ie(e){var t=e.dispatch,n=e.state;return ce("ArrowUp",function(){return t(te.Rotate)}),ce("ArrowDown",function(){return t(te.MoveDown)}),ce("ArrowLeft",function(){return t(te.MoveLeft)}),ce("ArrowRight",function(){return t(te.MoveRight)}),function(e,t){var n=a.a.useRef();a.a.useEffect(function(){n.current=t},[t]),a.a.useEffect(function(){if(null!=e){var t=setInterval(function(){n.current()},e);return function(){return clearInterval(t)}}},[e])}(n.interval,function(){return t(te.Tick)}),a.a.createElement("div",{style:ue.container},a.a.createElement(Z,{board:n.board,current:n.current,position:n.position}),a.a.createElement(K,{level:n.level,next:n.next,score:n.score},a.a.createElement("button",{onClick:function(){return t(te.Stop)}},"Pause")))}var ue={container:{display:"flex"}};c.a.render(a.a.createElement(function(){var e=a.a.useReducer(re,ne),t=Object(i.a)(e,2),n=t[0],r=t[1];switch(n.state){case ee.Paused:return a.a.createElement(ae,{dispatch:r,state:n});case ee.Playing:return a.a.createElement(ie,{dispatch:r,state:n});default:return null}}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.fbfabb25.chunk.js.map