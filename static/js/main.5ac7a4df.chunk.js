(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(10),o=n.n(a),i=(n(18),n(3));function u(e){var t=e.color,n=Object(r.useMemo)(function(){return function(e){return{backgroundColor:e}}(t)},[t]);return c.a.createElement("div",{style:n})}var l=n(12),s=n(2),f=n(4);function b(e,t){return{x:e,y:t}}var v,d,O,j,p,h,m,g,w,y,E=n(11),k=n(1);function x(e){return{type:e,orientation:y.Up}}function L(e){return C[e.type][e.orientation]}!function(e){e.L="L",e.I="I",e.T="T",e.S="S",e.Z="Z",e.O="O",e.J="J"}(w||(w={})),function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(y||(y={}));var R,C=(g={},Object(k.a)(g,w.L,(v={},Object(k.a)(v,y.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(k.a)(v,y.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(k.a)(v,y.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(k.a)(v,y.Left,[[1,1,0],[0,1,0],[0,1,0]]),v)),Object(k.a)(g,w.I,(d={},Object(k.a)(d,y.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(k.a)(d,y.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(k.a)(d,y.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(k.a)(d,y.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),d)),Object(k.a)(g,w.T,(O={},Object(k.a)(O,y.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(k.a)(O,y.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(k.a)(O,y.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(k.a)(O,y.Left,[[0,1,0],[1,1,0],[0,1,0]]),O)),Object(k.a)(g,w.S,(j={},Object(k.a)(j,y.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(k.a)(j,y.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(k.a)(j,y.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(k.a)(j,y.Left,[[1,0,0],[1,1,0],[0,1,0]]),j)),Object(k.a)(g,w.Z,(p={},Object(k.a)(p,y.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(k.a)(p,y.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(k.a)(p,y.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(k.a)(p,y.Left,[[0,1,0],[1,1,0],[1,0,0]]),p)),Object(k.a)(g,w.O,(h={},Object(k.a)(h,y.Up,[[1,1],[1,1]]),Object(k.a)(h,y.Right,[[1,1],[1,1]]),Object(k.a)(h,y.Down,[[1,1],[1,1]]),Object(k.a)(h,y.Left,[[1,1],[1,1]]),h)),Object(k.a)(g,w.J,(m={},Object(k.a)(m,y.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(k.a)(m,y.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(k.a)(m,y.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(k.a)(m,y.Left,[[0,1,0],[0,1,0],[1,1,0]]),m)),g);function D(){return Object(f.shuffle)(Object.keys(w))}function M(e){var t=Object(E.a)(e),n=t[0],r=t.slice(1);return r.length>0?[n,r]:[n,D()]}function U(){var e=M(D()),t=Object(i.a)(e,2),n=t[0],r=M(t[1]),c=Object(i.a)(r,2),a=c[0],o=c[1];return{board:T(20,10),current:x(n),level:0,next:x(a),position:b(3,0),randomizer:o,score:0,state:R.Playing}}function A(e){var t=function(e,t,n,r,c,a,o,u){var s,v=b(c.x,c.y+1);if(z(e,t,v))return[e,t,n,r,v,a,o,u];if(function(e){return 0===e.y}(c))return[e,t,n,r,c,a,o,R.Lost];var d=I(e,t,c,1),O=function(e){for(var t=0,n=e,r=!1,c=e.length/e.columns,a=0;a<c;a++)for(var o=0;o<e.columns;o++){var i=b(o,a),u=Z(e,i);if(0===W(e,u))break;if(o===e.columns-1){var s;t+=1,r||(r=!0,n=B(n));var v=b(0,a),d=Z(e,v);n.fill.splice(d,e.columns);var O=Object(f.fill)(new Array(e.columns),0,0);(s=n.fill).unshift.apply(s,Object(l.a)(O))}}return[n,t]}(d),j=Object(i.a)(O,2);d=j[0],s=j[1],d.linesCleared=d.linesCleared+s;var p=M(a),h=Object(i.a)(p,2),m=h[0],g=h[1],w=x(m),y=b(3,0),E=o+function(e,t){switch(e){case 0:return 0;case 1:return 40*(t+1);case 2:return 100*(t+1);case 3:return 300*(t+1);case 4:return 1200*(t+1);default:return 0}}(s,n),k=Math.floor(d.linesCleared/10);return[d,r,k,w,y,g,E,u]}(e.board,e.current,e.level,e.next,e.position,e.randomizer,e.score,e.state),n=Object(i.a)(t,8),r=n[0],c=n[1],a=n[2],o=n[3],u=n[4],v=n[5],d=n[6],O=n[7];return Object(s.a)({},e,{board:r,current:c,level:a,next:o,position:u,randomizer:v,score:d,state:O})}function T(e,t){var n=Object(f.fill)(new Array(e*t),0,0);return{columns:t,fill:n,length:n.length,linesCleared:0}}function I(e,t,n,r){for(var c=L(t),a=B(e),o=0;o<c.length;o++)for(var i=0;i<c[o].length;i++){if(0!==c[o][i])Y(a,Z(e,b(n.x+i,n.y+o)),r)}return a}function S(e,t,n){var r=b(n.x-1,n.y);return z(e,t,r)?r:n}function J(e,t,n){var r=b(n.x+1,n.y);return z(e,t,r)?r:n}function P(e,t,n){var r=function(e){return Object(s.a)({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}(t);return z(e,r,n)?r:t}function z(e,t,n){for(var r=L(t),c=e.columns-1,a=e.length/e.columns-1,o=0;o<r.length;o++)for(var i=0;i<r[o].length;i++)if(0!==r[o][i]){if(n.x+i<0||n.x+i>c)return!1;if(n.y+o<0||n.y+o>a)return!1;if(1===W(e,Z(e,b(n.x+i,n.y+o))))return!1}return!0}function Z(e,t){return t.x+t.y*e.columns}function B(e){return Object(s.a)({},e,{fill:e.fill.slice()})}function W(e,t){return e.fill[t]}function Y(e,t,n){e.fill[t]=n}function q(e){var t=e.board,n=e.colors,a=e.current,o=e.height,i=e.position,l=e.width,s=Object(r.useMemo)(function(){return function(e,t,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:n}}(t.columns,o,l)},[t.columns,o,l]),f=I(t,a,i,2);return c.a.createElement("div",{style:s},function(e,t){return e.fill.map(t)}(f,function(e,t){return c.a.createElement(u,{color:n[e],key:"".concat(t,"-").concat(e)})}))}function F(e){var t=e.board,n=e.children,r=e.current,a=e.position;return c.a.createElement("div",{style:H.container},c.a.createElement(q,{board:t,colors:G,current:r,height:400,position:a,width:200}),n)}!function(e){e[e.Playing=0]="Playing",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(R||(R={}));var G={0:"black",1:"dodgerblue",2:"limegreen"},H={container:{position:"relative"}},K=T(5,5),N=b(1,1);function Q(e){var t=e.next;return c.a.createElement(q,{board:K,colors:X,current:t,height:100,position:N,width:100})}var V,X={0:"black",1:"dodgerblue",2:"yellow"};function $(e){var t=e.children,n=e.level,r=e.next,a=e.score;return c.a.createElement("div",null,c.a.createElement(Q,{next:r}),c.a.createElement("div",null,"Level: ",n),c.a.createElement("div",null,"Score: ",a),c.a.createElement("div",null,t))}function _(e,t){Object(r.useEffect)(function(){function n(n){n.key===e&&t(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[e,t])}function ee(e,t){switch(t){case V.Tick:case V.MoveDown:return A(e);case V.MoveLeft:return n=e,Object(s.a)({},n,{position:S(n.board,n.current,n.position)});case V.MoveRight:return function(e){return Object(s.a)({},e,{position:J(e.board,e.current,e.position)})}(e);case V.Reset:return U();case V.Rotate:return function(e){return Object(s.a)({},e,{current:P(e.board,e.current,e.position)})}(e);default:return e}var n}function te(e){var t=e.dispatch,n=e.state,a=Object(r.useCallback)(function(){return t(V.Reset)},[t]);return _(" ",a),c.a.createElement("div",{style:ne.container},c.a.createElement(F,{board:n.board,current:n.current,position:n.position},c.a.createElement("span",{style:ne.text},"You lost!")),c.a.createElement($,{level:n.level,next:n.next,score:n.score},c.a.createElement("button",{onClick:a},"Reset")))}!function(e){e.MoveDown="down",e.MoveLeft="left",e.MoveRight="right",e.Reset="reset",e.Rotate="rotate",e.Start="start",e.Stop="stop",e.Tick="tick"}(V||(V={}));var ne={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function re(e){var t=e.dispatch,n=e.state,a=Object(r.useCallback)(function(){return t(V.Rotate)},[t]),o=Object(r.useCallback)(function(){return t(V.MoveDown)},[t]),i=Object(r.useCallback)(function(){return t(V.MoveLeft)},[t]),u=Object(r.useCallback)(function(){return t(V.MoveRight)},[t]),l=Object(r.useCallback)(function(){return t(V.Tick)},[t]);return _("ArrowUp",a),_("ArrowDown",o),_("ArrowLeft",i),_("ArrowRight",u),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=t},[t]),Object(r.useEffect)(function(){var t=setInterval(function(){n.current&&n.current()},e);return function(){return clearInterval(t)}},[e,t])}(function(e){switch(e){case 0:return 750;case 1:return 650;case 2:return 550;case 3:return 450;case 4:return 350;case 5:return 250;default:return 150}}(n.level),l),c.a.createElement("div",{style:ce.container},c.a.createElement(F,{board:n.board,current:n.current,position:n.position}),c.a.createElement($,{level:n.level,next:n.next,score:n.score}))}var ce={container:{display:"flex"}};var ae=U();o.a.render(c.a.createElement(function(){var e=Object(r.useReducer)(ee,ae),t=Object(i.a)(e,2),n=t[0],a=t[1];switch(n.state){case R.Lost:return c.a.createElement(te,{dispatch:a,state:n});case R.Playing:return c.a.createElement(re,{dispatch:a,state:n});default:return null}}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.5ac7a4df.chunk.js.map