(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(10),o=n.n(a),i=(n(18),n(3));function u(e){var t=e.color,n=Object(r.useMemo)(function(){return function(e){return{backgroundColor:e}}(t)},[t]);return c.a.createElement("div",{style:n})}var l=n(12),s=n(2),f=n(4);function b(e,t){return{x:e,y:t}}var v,d,O,j,p,h,m,g,w,y,E=n(11),k=n(1);function x(e){return{type:e,orientation:y.Up}}function L(e){return D[e.type][e.orientation]}!function(e){e.L="L",e.I="I",e.T="T",e.S="S",e.Z="Z",e.O="O",e.J="J"}(w||(w={})),function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(y||(y={}));var R,C,D=(g={},Object(k.a)(g,w.L,(v={},Object(k.a)(v,y.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(k.a)(v,y.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(k.a)(v,y.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(k.a)(v,y.Left,[[1,1,0],[0,1,0],[0,1,0]]),v)),Object(k.a)(g,w.I,(d={},Object(k.a)(d,y.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(k.a)(d,y.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(k.a)(d,y.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(k.a)(d,y.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),d)),Object(k.a)(g,w.T,(O={},Object(k.a)(O,y.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(k.a)(O,y.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(k.a)(O,y.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(k.a)(O,y.Left,[[0,1,0],[1,1,0],[0,1,0]]),O)),Object(k.a)(g,w.S,(j={},Object(k.a)(j,y.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(k.a)(j,y.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(k.a)(j,y.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(k.a)(j,y.Left,[[1,0,0],[1,1,0],[0,1,0]]),j)),Object(k.a)(g,w.Z,(p={},Object(k.a)(p,y.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(k.a)(p,y.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(k.a)(p,y.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(k.a)(p,y.Left,[[0,1,0],[1,1,0],[1,0,0]]),p)),Object(k.a)(g,w.O,(h={},Object(k.a)(h,y.Up,[[1,1],[1,1]]),Object(k.a)(h,y.Right,[[1,1],[1,1]]),Object(k.a)(h,y.Down,[[1,1],[1,1]]),Object(k.a)(h,y.Left,[[1,1],[1,1]]),h)),Object(k.a)(g,w.J,(m={},Object(k.a)(m,y.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(k.a)(m,y.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(k.a)(m,y.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(k.a)(m,y.Left,[[0,1,0],[0,1,0],[1,1,0]]),m)),g);function M(){return Object(f.shuffle)(Object.keys(w))}function U(e){var t=Object(E.a)(e),n=t[0],r=t.slice(1);return r.length>0?[n,r]:[n,M()]}function A(){var e=U(M()),t=Object(i.a)(e,2),n=t[0],r=U(t[1]),c=Object(i.a)(r,2),a=c[0],o=c[1];return{board:I(20,10),current:x(n),level:0,next:x(a),position:b(3,0),randomizer:o,score:0,state:R.Playing}}!function(e){e[e.Playing=0]="Playing",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(R||(R={})),function(e){e.MoveDown="down",e.MoveLeft="left",e.MoveRight="right",e.Reset="reset",e.Rotate="rotate",e.Start="start",e.Stop="stop",e.Tick="tick"}(C||(C={}));var S=A();function T(e,t){switch(t){case C.Tick:case C.MoveDown:var n=function(e,t,n,r,c,a,o,u){var s,v=b(c.x,c.y+1);if(B(e,t,v))return[e,t,n,r,v,a,o,u];if(function(e){return 0===e.y}(c))return[e,t,n,r,c,a,o,R.Lost];var d=J(e,t,c,1),O=function(e){for(var t=0,n=e,r=!1,c=e.length/e.columns,a=0;a<c;a++)for(var o=0;o<e.columns;o++){var i=b(o,a),u=W(e,i);if(0===q(e,u))break;if(o===e.columns-1){var s;t+=1,r||(r=!0,n=Y(n));var v=b(0,a),d=W(e,v);n.fill.splice(d,e.columns);var O=Object(f.fill)(new Array(e.columns),0,0);(s=n.fill).unshift.apply(s,Object(l.a)(O))}}return[n,t]}(d),j=Object(i.a)(O,2);d=j[0],s=j[1],d.linesCleared=d.linesCleared+s;var p=U(a),h=Object(i.a)(p,2),m=h[0],g=h[1],w=x(m),y=b(3,0),E=o+function(e,t){switch(e){case 0:return 0;case 1:return 40*(t+1);case 2:return 100*(t+1);case 3:return 300*(t+1);case 4:return 1200*(t+1);default:return 0}}(s,n),k=Math.floor(d.linesCleared/10);return[d,r,k,w,y,g,E,u]}(e.board,e.current,e.level,e.next,e.position,e.randomizer,e.score,e.state),r=Object(i.a)(n,8),c=r[0],a=r[1],o=r[2],u=r[3],v=r[4],d=r[5],O=r[6],j=r[7];return Object(s.a)({},e,{board:c,current:a,level:o,next:u,position:v,randomizer:d,score:O,state:j});case C.MoveLeft:return Object(s.a)({},e,{position:P(e.board,e.current,e.position)});case C.MoveRight:return Object(s.a)({},e,{position:z(e.board,e.current,e.position)});case C.Reset:return A();case C.Rotate:return Object(s.a)({},e,{current:Z(e.board,e.current,e.position)});case C.Start:return Object(s.a)({},e,{state:R.Playing});default:return e}}function I(e,t){var n=Object(f.fill)(new Array(e*t),0,0);return{columns:t,fill:n,length:n.length,linesCleared:0}}function J(e,t,n,r){for(var c=L(t),a=Y(e),o=0;o<c.length;o++)for(var i=0;i<c[o].length;i++){if(0!==c[o][i])F(a,W(e,b(n.x+i,n.y+o)),r)}return a}function P(e,t,n){var r=b(n.x-1,n.y);return B(e,t,r)?r:n}function z(e,t,n){var r=b(n.x+1,n.y);return B(e,t,r)?r:n}function Z(e,t,n){var r=function(e){return Object(s.a)({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}(t);return B(e,r,n)?r:t}function B(e,t,n){for(var r=L(t),c=e.columns-1,a=e.length/e.columns-1,o=0;o<r.length;o++)for(var i=0;i<r[o].length;i++)if(0!==r[o][i]){if(n.x+i<0||n.x+i>c)return!1;if(n.y+o<0||n.y+o>a)return!1;if(1===q(e,W(e,b(n.x+i,n.y+o))))return!1}return!0}function W(e,t){return t.x+t.y*e.columns}function Y(e){return Object(s.a)({},e,{fill:e.fill.slice()})}function q(e,t){return e.fill[t]}function F(e,t,n){e.fill[t]=n}function G(e){var t=e.board,n=e.colors,a=e.current,o=e.height,i=e.position,l=e.width,s=Object(r.useMemo)(function(){return function(e,t,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:n}}(t.columns,o,l)},[t.columns,o,l]),f=J(t,a,i,2);return c.a.createElement("div",{style:s},function(e,t){return e.fill.map(t)}(f,function(e,t){return c.a.createElement(u,{color:n[e],key:"".concat(t,"-").concat(e)})}))}function H(e){var t=e.board,n=e.children,r=e.current,a=e.position;return c.a.createElement("div",{style:N.container},c.a.createElement(G,{board:t,colors:K,current:r,height:400,position:a,width:200}),n)}var K={0:"black",1:"dodgerblue",2:"limegreen"},N={container:{position:"relative"}},Q=I(5,5),V=b(1,1);function X(e){var t=e.next;return c.a.createElement(G,{board:Q,colors:$,current:t,height:100,position:V,width:100})}var $={0:"black",1:"dodgerblue",2:"yellow"};function _(e){var t=e.children,n=e.level,r=e.next,a=e.score;return c.a.createElement("div",null,c.a.createElement(X,{next:r}),c.a.createElement("div",null,"Level: ",n),c.a.createElement("div",null,"Score: ",a),c.a.createElement("div",null,t))}function ee(e,t){Object(r.useEffect)(function(){function n(n){n.key===e&&t(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[e,t])}function te(e){var t=e.dispatch,n=e.state,a=Object(r.useCallback)(function(){return t(C.Reset)},[t]);return ee(" ",a),c.a.createElement("div",{style:ne.container},c.a.createElement(H,{board:n.board,current:n.current,position:n.position},c.a.createElement("span",{style:ne.text},"You lost!")),c.a.createElement(_,{level:n.level,next:n.next,score:n.score},c.a.createElement("button",{onClick:a},"Reset")))}var ne={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function re(e){var t=e.dispatch,n=e.state,a=Object(r.useCallback)(function(){return t(C.Rotate)},[t]),o=Object(r.useCallback)(function(){return t(C.MoveDown)},[t]),i=Object(r.useCallback)(function(){return t(C.MoveLeft)},[t]),u=Object(r.useCallback)(function(){return t(C.MoveRight)},[t]),l=Object(r.useCallback)(function(){return t(C.Tick)},[t]);return ee("ArrowUp",a),ee("ArrowDown",o),ee("ArrowLeft",i),ee("ArrowRight",u),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=t},[t]),Object(r.useEffect)(function(){var t=setInterval(function(){n.current&&n.current()},e);return function(){return clearInterval(t)}},[e,t])}(function(e){switch(e){case 0:return 750;case 1:return 650;case 2:return 550;case 3:return 450;case 4:return 350;case 5:return 250;default:return 150}}(n.level),l),c.a.createElement("div",{style:ce.container},c.a.createElement(H,{board:n.board,current:n.current,position:n.position}),c.a.createElement(_,{level:n.level,next:n.next,score:n.score}))}var ce={container:{display:"flex"}};o.a.render(c.a.createElement(function(){var e=Object(r.useReducer)(T,S),t=Object(i.a)(e,2),n=t[0],a=t[1];switch(n.state){case R.Lost:return c.a.createElement(te,{dispatch:a,state:n});case R.Playing:return c.a.createElement(re,{dispatch:a,state:n});default:return null}}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.97b12a23.chunk.js.map