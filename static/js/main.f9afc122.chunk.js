(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(9),o=n.n(a),i=(n(16),n(3));function u(e){var t=e.color,n=Object(r.useMemo)(function(){return function(e){return{backgroundColor:e}}(t)},[t]);return c.a.createElement("div",{style:n})}var l=n(2),s=n(6);function b(e,t){return{x:e,y:t}}var f,d,O,j,v,p,h,m,g,w,y=n(10),E=n(1);function k(e){return{type:e,orientation:w.Up}}function x(e){return L[e.type][e.orientation]}!function(e){e.L="L",e.I="I",e.T="T",e.S="S",e.Z="Z",e.O="O",e.J="J"}(g||(g={})),function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(w||(w={}));var L=(m={},Object(E.a)(m,g.L,(f={},Object(E.a)(f,w.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(E.a)(f,w.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(E.a)(f,w.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(E.a)(f,w.Left,[[1,1,0],[0,1,0],[0,1,0]]),f)),Object(E.a)(m,g.I,(d={},Object(E.a)(d,w.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(E.a)(d,w.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(E.a)(d,w.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(E.a)(d,w.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),d)),Object(E.a)(m,g.T,(O={},Object(E.a)(O,w.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(E.a)(O,w.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(E.a)(O,w.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(E.a)(O,w.Left,[[0,1,0],[1,1,0],[0,1,0]]),O)),Object(E.a)(m,g.S,(j={},Object(E.a)(j,w.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(E.a)(j,w.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(E.a)(j,w.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(E.a)(j,w.Left,[[1,0,0],[1,1,0],[0,1,0]]),j)),Object(E.a)(m,g.Z,(v={},Object(E.a)(v,w.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(E.a)(v,w.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(E.a)(v,w.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(E.a)(v,w.Left,[[0,1,0],[1,1,0],[1,0,0]]),v)),Object(E.a)(m,g.O,(p={},Object(E.a)(p,w.Up,[[1,1],[1,1]]),Object(E.a)(p,w.Right,[[1,1],[1,1]]),Object(E.a)(p,w.Down,[[1,1],[1,1]]),Object(E.a)(p,w.Left,[[1,1],[1,1]]),p)),Object(E.a)(m,g.J,(h={},Object(E.a)(h,w.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(E.a)(h,w.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(E.a)(h,w.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(E.a)(h,w.Left,[[0,1,0],[0,1,0],[1,1,0]]),h)),m);function R(){return Object(s.shuffle)(Object.keys(g))}function D(e){var t=Object(y.a)(e),n=t[0],r=t.slice(1);return r.length>0?[n,r]:[n,R()]}function C(e,t){var n=Object(s.fill)(new Array(e*t),0,0);return{columns:t,fill:n,length:n.length}}function M(e,t,n,r){for(var c=x(t),a=function(e){return Object(l.a)({},e,{fill:e.fill.slice()})}(e),o=0;o<c.length;o++)for(var i=0;i<c[o].length;i++){if(0!==c[o][i])J(a,A(e,b(n.x+i,n.y+o)),r)}return a}function P(e,t,n){var r=b(n.x-1,n.y);return T(e,t,r)?r:n}function S(e,t,n){var r=b(n.x+1,n.y);return T(e,t,r)?r:n}function U(e,t,n){var r=function(e){return Object(l.a)({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}(t);return T(e,r,n)?r:t}function T(e,t,n){for(var r=x(t),c=e.columns-1,a=e.length/e.columns-1,o=0;o<r.length;o++)for(var i=0;i<r[o].length;i++)if(0!==r[o][i]){if(n.x+i<0||n.x+i>c)return!1;if(n.y+o<0||n.y+o>a)return!1;if(1===I(e,A(e,b(n.x+i,n.y+o))))return!1}return!0}function A(e,t){return t.x+t.y*e.columns}function I(e,t){return e.fill[t]}function J(e,t,n){e.fill[t]=n}function z(e){var t=e.board,n=e.colors,a=e.current,o=e.height,i=e.position,l=e.width,s=Object(r.useMemo)(function(){return function(e,t,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:n}}(t.columns,o,l)},[t.columns,o,l]),b=M(t,a,i,2);return c.a.createElement("div",{style:s},function(e,t){return e.fill.map(t)}(b,function(e,t){return c.a.createElement(u,{color:n[e],key:"".concat(t,"-").concat(e)})}))}function Z(e){var t=e.board,n=e.children,r=e.current,a=e.position;return c.a.createElement("div",{style:W.container},c.a.createElement(z,{board:t,colors:B,current:r,height:400,position:a,width:200}),n)}var B={0:"black",1:"dodgerblue",2:"limegreen"},W={container:{position:"relative"}},q=C(5,5),F=b(1,1);function G(e){var t=e.next;return c.a.createElement(z,{board:q,colors:H,current:t,height:100,position:F,width:100})}var H={0:"black",1:"dodgerblue",2:"yellow"};function K(e){var t=e.children,n=e.level,r=e.next,a=e.score;return c.a.createElement("div",null,c.a.createElement(G,{next:r}),c.a.createElement("div",null,"Level: ",n),c.a.createElement("div",null,"Score: ",a),c.a.createElement("div",null,t))}function N(e,t){Object(r.useEffect)(function(){function n(n){n.key===e&&t(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[e,t])}var Q,V,X=D(R()),Y=Object(i.a)(X,2),$=Y[0],_=D(Y[1]),ee=Object(i.a)(_,2),te=ee[0],ne=ee[1];!function(e){e[e.Paused=0]="Paused",e[e.Playing=1]="Playing",e[e.Won=2]="Won",e[e.Lost=3]="Lost"}(Q||(Q={})),function(e){e.MoveDown="down",e.MoveLeft="left",e.MoveRight="right",e.Reset="reset",e.Rotate="rotate",e.Start="start",e.Stop="stop",e.Tick="tick"}(V||(V={}));var re={board:C(20,10),current:k($),interval:750,level:1,next:k(te),position:b(3,0),randomizer:ne,score:0,state:Q.Paused};function ce(e,t){switch(t){case V.Tick:case V.MoveDown:var n=function(e,t,n,r,c){var a=b(r.x,r.y+1);if(T(e,t,a))return[e,t,n,a,c];var o=M(e,t,r,1),u=D(c),l=Object(i.a)(u,2),s=l[0],f=l[1];return[o,n,k(s),b(3,0),f]}(e.board,e.current,e.next,e.position,e.randomizer),r=Object(i.a)(n,5),c=r[0],a=r[1],o=r[2],u=r[3],s=r[4];return Object(l.a)({},e,{board:c,current:a,next:o,position:u,randomizer:s});case V.MoveLeft:return Object(l.a)({},e,{position:P(e.board,e.current,e.position)});case V.MoveRight:return Object(l.a)({},e,{position:S(e.board,e.current,e.position)});case V.Rotate:return Object(l.a)({},e,{current:U(e.board,e.current,e.position)});case V.Start:return Object(l.a)({},e,{state:Q.Playing});case V.Stop:return Object(l.a)({},e,{state:Q.Paused});default:return e}}function ae(e){var t=e.dispatch,n=e.state,a=Object(r.useCallback)(function(){return t(V.Start)},[t]);return N(" ",a),c.a.createElement("div",{style:oe.container},c.a.createElement(Z,{board:n.board,current:n.current,position:n.position},c.a.createElement("span",{style:oe.text},"Paused")),c.a.createElement(K,{level:n.level,next:n.next,score:n.score},c.a.createElement("button",{onClick:a},"Start")))}var oe={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function ie(e){var t=e.dispatch,n=e.state,a=Object(r.useCallback)(function(){return t(V.Rotate)},[t]),o=Object(r.useCallback)(function(){return t(V.MoveDown)},[t]),i=Object(r.useCallback)(function(){return t(V.MoveLeft)},[t]),u=Object(r.useCallback)(function(){return t(V.MoveRight)},[t]),l=Object(r.useCallback)(function(){return t(V.Stop)},[t]),s=Object(r.useCallback)(function(){return t(V.Tick)},[t]);return N("ArrowUp",a),N("ArrowDown",o),N("ArrowLeft",i),N("ArrowRight",u),N(" ",l),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=t},[t]),Object(r.useEffect)(function(){var t=setInterval(function(){n.current&&n.current()},e);return function(){return clearInterval(t)}},[e,t])}(n.interval,s),c.a.createElement("div",{style:ue.container},c.a.createElement(Z,{board:n.board,current:n.current,position:n.position}),c.a.createElement(K,{level:n.level,next:n.next,score:n.score},c.a.createElement("button",{onClick:l},"Pause")))}var ue={container:{display:"flex"}};o.a.render(c.a.createElement(function(){var e=Object(r.useReducer)(ce,re),t=Object(i.a)(e,2),n=t[0],a=t[1];switch(n.state){case Q.Paused:return c.a.createElement(ae,{dispatch:a,state:n});case Q.Playing:return c.a.createElement(ie,{dispatch:a,state:n});default:return null}}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.f9afc122.chunk.js.map