(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,n){t.exports=n(18)},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(9),c=n.n(o),i=(n(16),n(3));function u(t){var e=t.color,n=a.a.useMemo(function(){return function(t){return{backgroundColor:t}}(e)},[e]);return a.a.createElement("div",{style:n})}var l=n(2),s=n(6);function f(t,e){return{x:t,y:e}}var b,d,v,p,O,j,h,m,g,w,y=n(10),E=n(1);function x(t){return{type:t,orientation:w.Up}}function L(t){return k[t.type][t.orientation]}!function(t){t.L="L",t.I="I",t.T="T",t.S="S",t.Z="Z",t.O="O",t.J="J"}(g||(g={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(w||(w={}));var k=(m={},Object(E.a)(m,g.L,(b={},Object(E.a)(b,w.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(E.a)(b,w.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(E.a)(b,w.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(E.a)(b,w.Left,[[1,1,0],[0,1,0],[0,1,0]]),b)),Object(E.a)(m,g.I,(d={},Object(E.a)(d,w.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(E.a)(d,w.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(E.a)(d,w.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(E.a)(d,w.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),d)),Object(E.a)(m,g.T,(v={},Object(E.a)(v,w.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(E.a)(v,w.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(E.a)(v,w.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(E.a)(v,w.Left,[[0,1,0],[1,1,0],[0,1,0]]),v)),Object(E.a)(m,g.S,(p={},Object(E.a)(p,w.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(E.a)(p,w.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(E.a)(p,w.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(E.a)(p,w.Left,[[1,0,0],[1,1,0],[0,1,0]]),p)),Object(E.a)(m,g.Z,(O={},Object(E.a)(O,w.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(E.a)(O,w.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(E.a)(O,w.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(E.a)(O,w.Left,[[0,1,0],[1,1,0],[1,0,0]]),O)),Object(E.a)(m,g.O,(j={},Object(E.a)(j,w.Up,[[1,1],[1,1]]),Object(E.a)(j,w.Right,[[1,1],[1,1]]),Object(E.a)(j,w.Down,[[1,1],[1,1]]),Object(E.a)(j,w.Left,[[1,1],[1,1]]),j)),Object(E.a)(m,g.J,(h={},Object(E.a)(h,w.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(E.a)(h,w.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(E.a)(h,w.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(E.a)(h,w.Left,[[0,1,0],[0,1,0],[1,1,0]]),h)),m);function R(){return Object(s.shuffle)(Object.keys(g))}function D(t){var e=Object(y.a)(t),n=e[0],r=e.slice(1);return r.length>0?[n,r]:[n,R()]}function S(t,e){var n=Object(s.fill)(new Array(t*e),0,0);return{columns:e,fill:n,length:n.length}}function M(t,e,n,r){for(var a=L(e),o=function(t){return Object(l.a)({},t,{fill:t.fill.slice()})}(t),c=0;c<a.length;c++)for(var i=0;i<a[c].length;i++){if(0!==a[c][i])J(o,I(t,f(n.x+i,n.y+c)),r)}return o}function P(t,e,n){var r=f(n.x-1,n.y);return A(t,e,r)?r:n}function U(t,e,n){var r=f(n.x+1,n.y);return A(t,e,r)?r:n}function T(t,e,n){var r=function(t){return Object(l.a)({},t,{orientation:(e=t.orientation,(e+1)%4)});var e}(e);return A(t,r,n)?r:e}function A(t,e,n){for(var r=L(e),a=t.columns-1,o=t.length/t.columns-1,c=0;c<r.length;c++)for(var i=0;i<r[c].length;i++)if(0!==r[c][i]){if(n.x+i<0||n.x+i>a)return!1;if(n.y+c<0||n.y+c>o)return!1;if(1===C(t,I(t,f(n.x+i,n.y+c))))return!1}return!0}function I(t,e){return e.x+e.y*t.columns}function C(t,e){return t.fill[e]}function J(t,e,n){t.fill[e]=n}function z(t){var e=t.board,n=t.colors,r=t.current,o=t.height,c=t.position,i=t.width,l=a.a.useMemo(function(){return function(t,e,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(t,", 1fr)"),height:e,width:n}}(e.columns,o,i)},[e.columns,o,i]),s=M(e,r,c,2);return a.a.createElement("div",{style:l},function(t,e){return t.fill.map(e)}(s,function(t,e){return a.a.createElement(u,{color:n[t],key:"".concat(e,"-").concat(t)})}))}function Z(t){var e=t.board,n=t.children,r=t.current,o=t.position;return a.a.createElement("div",{style:W.container},a.a.createElement(z,{board:e,colors:B,current:r,height:400,position:o,width:200}),n)}var B={0:"black",1:"dodgerblue",2:"limegreen"},W={container:{position:"relative"}},q=S(5,5),F=f(1,1);function G(t){var e=t.next;return a.a.createElement(z,{board:q,colors:H,current:e,height:100,position:F,width:100})}var H={0:"black",1:"dodgerblue",2:"yellow"};function K(t){var e=t.children,n=t.level,r=t.next,o=t.score;return a.a.createElement("div",null,a.a.createElement(G,{next:r}),a.a.createElement("div",null,"Level: ",n),a.a.createElement("div",null,"Score: ",o),a.a.createElement("div",null,e))}function N(t,e){a.a.useEffect(function(){function n(n){n.key===t&&e(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[t])}var Q,V,X=D(R()),Y=Object(i.a)(X,2),$=Y[0],_=D(Y[1]),tt=Object(i.a)(_,2),et=tt[0],nt=tt[1];!function(t){t[t.Paused=0]="Paused",t[t.Playing=1]="Playing",t[t.Won=2]="Won",t[t.Lost=3]="Lost"}(Q||(Q={})),function(t){t.MoveDown="down",t.MoveLeft="left",t.MoveRight="right",t.Reset="reset",t.Rotate="rotate",t.Start="start",t.Stop="stop",t.Tick="tick"}(V||(V={}));var rt={board:S(20,10),current:x($),interval:750,level:1,next:x(et),position:f(3,0),randomizer:nt,score:0,state:Q.Paused};function at(t,e){switch(e){case V.Tick:case V.MoveDown:var n=function(t,e,n,r,a){var o=f(r.x,r.y+1);if(A(t,e,o))return[t,e,n,o,a];var c=M(t,e,r,1),u=D(a),l=Object(i.a)(u,2),s=l[0],b=l[1];return[c,n,x(s),f(3,0),b]}(t.board,t.current,t.next,t.position,t.randomizer),r=Object(i.a)(n,5),a=r[0],o=r[1],c=r[2],u=r[3],s=r[4];return Object(l.a)({},t,{board:a,current:o,next:c,position:u,randomizer:s});case V.MoveLeft:return Object(l.a)({},t,{position:P(t.board,t.current,t.position)});case V.MoveRight:return Object(l.a)({},t,{position:U(t.board,t.current,t.position)});case V.Rotate:return Object(l.a)({},t,{current:T(t.board,t.current,t.position)});case V.Start:return Object(l.a)({},t,{state:Q.Playing});case V.Stop:return Object(l.a)({},t,{state:Q.Paused});default:return t}}function ot(t){var e=t.dispatch,n=t.state;return N(" ",function(){return e(V.Start)}),a.a.createElement("div",{style:ct.container},a.a.createElement(Z,{board:n.board,current:n.current,position:n.position},a.a.createElement("span",{style:ct.text},"Paused")),a.a.createElement(K,{level:n.level,next:n.next,score:n.score},a.a.createElement("button",{onClick:function(){return e(V.Start)}},"Start")))}var ct={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function it(t){var e=t.dispatch,n=t.state;return N("ArrowUp",function(){return e(V.Rotate)}),N("ArrowDown",function(){return e(V.MoveDown)}),N("ArrowLeft",function(){return e(V.MoveLeft)}),N("ArrowRight",function(){return e(V.MoveRight)}),N(" ",function(){return e(V.Stop)}),function(t,e){var n=a.a.useRef();a.a.useEffect(function(){n.current=e},[e]),a.a.useEffect(function(){var e=setInterval(function(){n.current&&n.current()},t);return function(){return clearInterval(e)}},[t])}(n.interval,function(){return e(V.Tick)}),a.a.createElement("div",{style:ut.container},a.a.createElement(Z,{board:n.board,current:n.current,position:n.position}),a.a.createElement(K,{level:n.level,next:n.next,score:n.score},a.a.createElement("button",{onClick:function(){return e(V.Stop)}},"Pause")))}var ut={container:{display:"flex"}};c.a.render(a.a.createElement(function(){var t=a.a.useReducer(at,rt),e=Object(i.a)(t,2),n=e[0],r=e[1];switch(n.state){case Q.Paused:return a.a.createElement(ot,{dispatch:r,state:n});case Q.Playing:return a.a.createElement(it,{dispatch:r,state:n});default:return null}}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.64f3f902.chunk.js.map