(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,n){t.exports=n(18)},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),c=n(9),a=n.n(c),i=(n(16),n(3));function u(t){var e=t.color,n=o.a.useMemo(function(){return function(t){return{backgroundColor:t}}(e)},[e]);return o.a.createElement("div",{style:n})}var f=n(2),l=n(6);function b(t,e){return{x:t,y:e}}var s,v,O,j,d,p,h,m,g=n(10),w=n(0),y={L:"L",I:"I",T:"T",S:"S",Z:"Z",O:"O",J:"J"},x={Up:0,Right:1,Down:2,Left:3};function E(t){return{type:t,orientation:x.Up}}function L(t){return R[t.type][t.orientation]}var R=(m={},Object(w.a)(m,y.L,(s={},Object(w.a)(s,x.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(w.a)(s,x.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(w.a)(s,x.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(w.a)(s,x.Left,[[1,1,0],[0,1,0],[0,1,0]]),s)),Object(w.a)(m,y.I,(v={},Object(w.a)(v,x.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(w.a)(v,x.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(w.a)(v,x.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(w.a)(v,x.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),v)),Object(w.a)(m,y.T,(O={},Object(w.a)(O,x.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(w.a)(O,x.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(w.a)(O,x.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(w.a)(O,x.Left,[[0,1,0],[1,1,0],[0,1,0]]),O)),Object(w.a)(m,y.S,(j={},Object(w.a)(j,x.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(w.a)(j,x.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(w.a)(j,x.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(w.a)(j,x.Left,[[1,0,0],[1,1,0],[0,1,0]]),j)),Object(w.a)(m,y.Z,(d={},Object(w.a)(d,x.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(w.a)(d,x.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(w.a)(d,x.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(w.a)(d,x.Left,[[0,1,0],[1,1,0],[1,0,0]]),d)),Object(w.a)(m,y.O,(p={},Object(w.a)(p,x.Up,[[1,1],[1,1]]),Object(w.a)(p,x.Right,[[1,1],[1,1]]),Object(w.a)(p,x.Down,[[1,1],[1,1]]),Object(w.a)(p,x.Left,[[1,1],[1,1]]),p)),Object(w.a)(m,y.J,(h={},Object(w.a)(h,x.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(w.a)(h,x.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(w.a)(h,x.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(w.a)(h,x.Left,[[0,1,0],[0,1,0],[1,1,0]]),h)),m);function k(){return Object(l.shuffle)(Object.keys(y))}function D(t){var e=Object(g.a)(t),n=e[0],r=e.slice(1);return r.length>0?[n,r]:[n,k()]}function M(t,e){var n=Object(l.fill)(new Array(t*e),0,0);return{columns:e,fill:n,length:n.length}}function U(t,e,n,r){for(var o=L(e),c=function(t){return Object(f.a)({},t,{fill:t.fill.slice()})}(t),a=0;a<o.length;a++)for(var i=0;i<o[a].length;i++){if(0!==o[a][i])Z(c,J(t,b(n.x+i,n.y+a)),r)}return c}function T(t,e,n){var r=b(n.x-1,n.y);return A(t,e,r)?r:n}function I(t,e,n){var r=b(n.x+1,n.y);return A(t,e,r)?r:n}function S(t,e,n){var r=function(t){return Object(f.a)({},t,{orientation:(e=t.orientation,(e+1)%4)});var e}(e);return A(t,r,n)?r:e}function A(t,e,n){for(var r=L(e),o=t.columns-1,c=t.length/t.columns-1,a=0;a<r.length;a++)for(var i=0;i<r[a].length;i++)if(0!==r[a][i]){if(n.x+i<0||n.x+i>o)return!1;if(n.y+a<0||n.y+a>c)return!1;if(1===z(t,J(t,b(n.x+i,n.y+a))))return!1}return!0}function J(t,e){return e.x+e.y*t.columns}function z(t,e){return t.fill[e]}function Z(t,e,n){t.fill[e]=n}function B(t){var e=t.board,n=t.current,r=t.height,c=t.position,a=t.width,i=o.a.useMemo(function(){return function(t,e,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(t,", 1fr)"),height:e,width:n}}(e.columns,r,a)},[e.columns,r,a]),f=U(e,n,c,2);return o.a.createElement("div",{style:i},function(t,e){return t.fill.map(e)}(f,function(t,e){return o.a.createElement(u,{color:C[t],key:"".concat(e,"-").concat(t)})}))}var C={0:"black",1:"dodgerblue",2:"limegreen"};function q(t){var e=t.board,n=t.current,r=t.position;return o.a.createElement(B,{board:e,current:n,height:400,position:r,width:200})}var F=M(5,5),G=b(1,1);function H(t){var e=t.next;return o.a.createElement(B,{board:F,current:e,height:100,position:G,width:100})}function K(t){var e=t.level,n=t.next,r=t.score;return o.a.createElement("div",null,o.a.createElement(H,{next:n}),o.a.createElement("div",null,"Level: ",e),o.a.createElement("div",null,"Score: ",r))}function N(t,e){o.a.useEffect(function(){function n(n){n.key===t&&e(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[t])}var P=D(k()),Q=Object(i.a)(P,2),V=Q[0],W=D(Q[1]),X=Object(i.a)(W,2),Y=X[0],$=X[1],_={MoveDown:"down",MoveLeft:"left",MoveRight:"right",Reset:"reset",Rotate:"rotate",Start:"start",Stop:"stop",Tick:"tick"},tt={board:M(20,10),current:E(V),interval:750,level:1,next:E(Y),position:b(3,0),randomizer:$,score:0,state:0};function et(t,e){switch(e){case _.Tick:case _.MoveDown:var n=function(t,e,n,r,o){var c=b(r.x,r.y+1);if(A(t,e,c))return[t,e,n,c,o];var a=U(t,e,r,1),u=D(o),f=Object(i.a)(u,2),l=f[0],s=f[1];return[a,n,E(l),b(3,0),s]}(t.board,t.current,t.next,t.position,t.randomizer),r=Object(i.a)(n,5),o=r[0],c=r[1],a=r[2],u=r[3],l=r[4];return Object(f.a)({},t,{board:o,current:c,next:a,position:u,randomizer:l});case _.MoveLeft:return Object(f.a)({},t,{position:T(t.board,t.current,t.position)});case _.MoveRight:return Object(f.a)({},t,{position:I(t.board,t.current,t.position)});case _.Rotate:return Object(f.a)({},t,{current:S(t.board,t.current,t.position)});default:return t}}var nt={container:{display:"flex"}};a.a.render(o.a.createElement(function(){var t=o.a.useReducer(et,tt),e=Object(i.a)(t,2),n=e[0],r=e[1];return N("ArrowUp",function(){return r(_.Rotate)}),N("ArrowDown",function(){return r(_.MoveDown)}),N("ArrowLeft",function(){return r(_.MoveLeft)}),N("ArrowRight",function(){return r(_.MoveRight)}),function(t,e){var n=o.a.useRef();o.a.useEffect(function(){n.current=e},[e]),o.a.useEffect(function(){if(null!=t){var e=setInterval(function(){n.current()},t);return function(){return clearInterval(e)}}},[t])}(n.interval,function(){return r(_.Tick)}),o.a.createElement("div",{style:nt.container},o.a.createElement(q,{board:n.board,current:n.current,position:n.position}),o.a.createElement(K,{level:n.level,next:n.next,score:n.score}))}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.e0cb1d8c.chunk.js.map