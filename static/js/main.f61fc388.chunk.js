(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{12:function(e,t,r){e.exports=r(20)},17:function(e,t,r){},20:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),o=r(9),a=r.n(o),i=(r(17),r(2));function u(e){var t=e.color,r=Object(n.useMemo)((function(){return function(e){return{backgroundColor:e}}(t)}),[t]);return c.a.createElement("div",{style:r})}var l=r(11),s=r(1),f=r(3);function b(e,t){return{x:e,y:t}}var O,p,j,v,d,y,h,g,m,w,E=r(10);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){return{type:e,orientation:w.Up}}function x(e){return R[e.type][e.orientation]}function D(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}!function(e){e.L="L",e.I="I",e.T="T",e.S="S",e.Z="Z",e.O="O",e.J="J"}(m||(m={})),function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(w||(w={}));var L,R=(g={},Object(s.a)(g,m.L,(O={},Object(s.a)(O,w.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(s.a)(O,w.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(s.a)(O,w.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(s.a)(O,w.Left,[[1,1,0],[0,1,0],[0,1,0]]),O)),Object(s.a)(g,m.I,(p={},Object(s.a)(p,w.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(s.a)(p,w.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(s.a)(p,w.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(s.a)(p,w.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),p)),Object(s.a)(g,m.T,(j={},Object(s.a)(j,w.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(s.a)(j,w.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(s.a)(j,w.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(s.a)(j,w.Left,[[0,1,0],[1,1,0],[0,1,0]]),j)),Object(s.a)(g,m.S,(v={},Object(s.a)(v,w.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(s.a)(v,w.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(s.a)(v,w.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(s.a)(v,w.Left,[[1,0,0],[1,1,0],[0,1,0]]),v)),Object(s.a)(g,m.Z,(d={},Object(s.a)(d,w.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(s.a)(d,w.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(s.a)(d,w.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(s.a)(d,w.Left,[[0,1,0],[1,1,0],[1,0,0]]),d)),Object(s.a)(g,m.O,(y={},Object(s.a)(y,w.Up,[[1,1],[1,1]]),Object(s.a)(y,w.Right,[[1,1],[1,1]]),Object(s.a)(y,w.Down,[[1,1],[1,1]]),Object(s.a)(y,w.Left,[[1,1],[1,1]]),y)),Object(s.a)(g,m.J,(h={},Object(s.a)(h,w.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(s.a)(h,w.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(s.a)(h,w.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(s.a)(h,w.Left,[[0,1,0],[0,1,0],[1,1,0]]),h)),g);function C(){return Object(f.shuffle)(Object.keys(m))}function M(e){var t=Object(E.a)(e),r=t[0],n=t.slice(1);return n.length>0?[r,n]:[r,C()]}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(){var e=M(C()),t=Object(i.a)(e,2),r=t[0],n=M(t[1]),c=Object(i.a)(n,2),o=c[0],a=c[1];return{board:J(20,10),current:P(r),level:0,next:P(o),position:b(3,0),randomizer:a,score:0,state:L.Playing}}function T(e){var t=function(e,t,r,n,c,o,a,u){var s,O=b(c.x,c.y+1);if(Y(e,t,O))return[e,t,r,n,O,o,a,u];if(function(e){return 0===e.y}(c))return[e,t,r,n,c,o,a,L.Lost];var p=z(e,t,c,1),j=function(e){for(var t=0,r=e,n=!1,c=e.length/e.columns,o=0;o<c;o++)for(var a=0;a<e.columns;a++){var i=b(a,o),u=q(e,i);if(0===G(e,u))break;if(a===e.columns-1){var s;t+=1,n||(n=!0,r=F(r));var O=b(0,o),p=q(e,O);r.fill.splice(p,e.columns);var j=Object(f.fill)(new Array(e.columns),0,0);(s=r.fill).unshift.apply(s,Object(l.a)(j))}}return[r,t]}(p),v=Object(i.a)(j,2);p=v[0],s=v[1],p.linesCleared=p.linesCleared+s;var d=M(o),y=Object(i.a)(d,2),h=y[0],g=y[1],m=P(h),w=b(3,0),E=a+function(e,t){switch(e){case 0:return 0;case 1:return 40*(t+1);case 2:return 100*(t+1);case 3:return 300*(t+1);case 4:return 1200*(t+1);default:return 0}}(s,r),k=Math.floor(p.linesCleared/10);return[p,n,k,m,w,g,E,u]}(e.board,e.current,e.level,e.next,e.position,e.randomizer,e.score,e.state),r=Object(i.a)(t,8);return U({},e,{board:r[0],current:r[1],level:r[2],next:r[3],position:r[4],randomizer:r[5],score:r[6],state:r[7]})}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e,t){var r=Object(f.fill)(new Array(e*t),0,0);return{columns:t,fill:r,length:r.length,linesCleared:0}}function z(e,t,r,n){for(var c=x(t),o=F(e),a=0;a<c.length;a++)for(var i=0;i<c[a].length;i++){if(0!==c[a][i])H(o,q(e,b(r.x+i,r.y+a)),n)}return o}function Z(e,t,r){var n=b(r.x-1,r.y);return Y(e,t,n)?n:r}function B(e,t,r){var n=b(r.x+1,r.y);return Y(e,t,n)?n:r}function W(e,t,r){var n=D(t);return Y(e,n,r)?n:t}function Y(e,t,r){for(var n=x(t),c=e.columns-1,o=e.length/e.columns-1,a=0;a<n.length;a++)for(var i=0;i<n[a].length;i++)if(0!==n[a][i]){if(r.x+i<0||r.x+i>c)return!1;if(r.y+a<0||r.y+a>o)return!1;if(1===G(e,q(e,b(r.x+i,r.y+a))))return!1}return!0}function q(e,t){return t.x+t.y*e.columns}function F(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{fill:e.fill.slice()})}function G(e,t){return e.fill[t]}function H(e,t,r){e.fill[t]=r}function K(e){var t=e.board,r=e.colors,o=e.current,a=e.height,i=e.position,l=e.width,s=Object(n.useMemo)((function(){return function(e,t,r){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:r}}(t.columns,a,l)}),[t.columns,a,l]),f=z(t,o,i,2);return c.a.createElement("div",{style:s},function(e,t){return e.fill.map(t)}(f,(function(e,t){return c.a.createElement(u,{color:r[e],key:"".concat(t,"-").concat(e)})})))}function N(e){var t=e.board,r=e.children,n=e.current,o=e.position;return c.a.createElement("div",{style:V.container},c.a.createElement(K,{board:t,colors:Q,current:n,height:400,position:o,width:200}),r)}!function(e){e[e.Playing=0]="Playing",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(L||(L={}));var Q={0:"black",1:"dodgerblue",2:"limegreen"},V={container:{position:"relative"}},X=J(5,5),$=b(1,1);function _(e){var t=e.next;return c.a.createElement(K,{board:X,colors:te,current:t,height:100,position:$,width:100})}var ee,te={0:"black",1:"dodgerblue",2:"yellow"};function re(e){var t=e.children,r=e.level,n=e.next,o=e.score;return c.a.createElement("div",null,c.a.createElement(_,{next:n}),c.a.createElement("div",null,"Level: ",r),c.a.createElement("div",null,"Score: ",o),c.a.createElement("div",null,t))}function ne(e,t){Object(n.useEffect)((function(){function r(r){r.key===e&&t(r)}return document.addEventListener("keydown",r),function(){return document.removeEventListener("keydown",r)}}),[e,t])}function ce(e,t){switch(t){case ee.Tick:case ee.MoveDown:return T(e);case ee.MoveLeft:return U({},r=e,{position:Z(r.board,r.current,r.position)});case ee.MoveRight:return function(e){return U({},e,{position:B(e.board,e.current,e.position)})}(e);case ee.Reset:return A();case ee.Rotate:return function(e){return U({},e,{current:W(e.board,e.current,e.position)})}(e);default:return e}var r}function oe(e){var t=e.dispatch,r=e.state,o=Object(n.useCallback)((function(){return t(ee.Reset)}),[t]);return ne(" ",o),c.a.createElement("div",{style:ae.container},c.a.createElement(N,{board:r.board,current:r.current,position:r.position},c.a.createElement("span",{style:ae.text},"You lost!")),c.a.createElement(re,{level:r.level,next:r.next,score:r.score},c.a.createElement("button",{onClick:o},"Reset")))}!function(e){e.MoveDown="down",e.MoveLeft="left",e.MoveRight="right",e.Reset="reset",e.Rotate="rotate",e.Start="start",e.Stop="stop",e.Tick="tick"}(ee||(ee={}));var ae={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};var ie=r(7),ue=r.n(ie);function le(e,t){Object(n.useEffect)((function(){return ue.a.on(document,e,t),function(){return ue.a.off(document,e,t)}}),[e,t])}function se(e){var t=e.dispatch,r=e.state,o=Object(n.useCallback)((function(){return t(ee.Rotate)}),[t]),a=Object(n.useCallback)((function(){return t(ee.MoveDown)}),[t]),i=Object(n.useCallback)((function(){return t(ee.MoveLeft)}),[t]),u=Object(n.useCallback)((function(){return t(ee.MoveRight)}),[t]),l=Object(n.useCallback)((function(){return t(ee.Tick)}),[t]);return ne("ArrowUp",o),ne("ArrowDown",a),ne("ArrowLeft",i),ne("ArrowRight",u),le("swipeleft",i),le("swiperight",u),le("tap",o),function(e,t){var r=Object(n.useRef)(e);Object(n.useEffect)((function(){r.current=e}),[e]),Object(n.useEffect)((function(){var e=setInterval(r.current,t);return function(){return clearInterval(e)}}),[t,r])}(l,function(e){switch(e){case 0:return 750;case 1:return 650;case 2:return 550;case 3:return 450;case 4:return 350;case 5:return 250;default:return 150}}(r.level)),c.a.createElement("div",{style:fe.container},c.a.createElement(N,{board:r.board,current:r.current,position:r.position}),c.a.createElement(re,{level:r.level,next:r.next,score:r.score}))}var fe={container:{display:"flex"}};var be=A();a.a.render(c.a.createElement((function(){var e=Object(n.useReducer)(ce,be),t=Object(i.a)(e,2),r=t[0],o=t[1];switch(r.state){case L.Lost:return c.a.createElement(oe,{dispatch:o,state:r});case L.Playing:return c.a.createElement(se,{dispatch:o,state:r});default:return null}})),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.f61fc388.chunk.js.map