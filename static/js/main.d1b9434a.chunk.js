(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),i=(n(16),n(3));function u(e){var t=e.color,n=Object(r.useMemo)(function(){return function(e){return{backgroundColor:e}}(t)},[t]);return a.a.createElement("div",{style:n})}var l=n(2),s=n(6);function b(e,t){return{x:e,y:t}}var f,d,v,O,j,p,m,h,g,y,w=n(10),E=n(1);function k(e){return{type:e,orientation:y.Up}}function x(e){return C[e.type][e.orientation]}!function(e){e.L="L",e.I="I",e.T="T",e.S="S",e.Z="Z",e.O="O",e.J="J"}(g||(g={})),function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(y||(y={}));var R,L,C=(h={},Object(E.a)(h,g.L,(f={},Object(E.a)(f,y.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(E.a)(f,y.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(E.a)(f,y.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(E.a)(f,y.Left,[[1,1,0],[0,1,0],[0,1,0]]),f)),Object(E.a)(h,g.I,(d={},Object(E.a)(d,y.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(E.a)(d,y.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(E.a)(d,y.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(E.a)(d,y.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),d)),Object(E.a)(h,g.T,(v={},Object(E.a)(v,y.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(E.a)(v,y.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(E.a)(v,y.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(E.a)(v,y.Left,[[0,1,0],[1,1,0],[0,1,0]]),v)),Object(E.a)(h,g.S,(O={},Object(E.a)(O,y.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(E.a)(O,y.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(E.a)(O,y.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(E.a)(O,y.Left,[[1,0,0],[1,1,0],[0,1,0]]),O)),Object(E.a)(h,g.Z,(j={},Object(E.a)(j,y.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(E.a)(j,y.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(E.a)(j,y.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(E.a)(j,y.Left,[[0,1,0],[1,1,0],[1,0,0]]),j)),Object(E.a)(h,g.O,(p={},Object(E.a)(p,y.Up,[[1,1],[1,1]]),Object(E.a)(p,y.Right,[[1,1],[1,1]]),Object(E.a)(p,y.Down,[[1,1],[1,1]]),Object(E.a)(p,y.Left,[[1,1],[1,1]]),p)),Object(E.a)(h,g.J,(m={},Object(E.a)(m,y.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(E.a)(m,y.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(E.a)(m,y.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(E.a)(m,y.Left,[[0,1,0],[0,1,0],[1,1,0]]),m)),h);function D(){return Object(s.shuffle)(Object.keys(g))}function M(e){var t=Object(w.a)(e),n=t[0],r=t.slice(1);return r.length>0?[n,r]:[n,D()]}function P(){var e=M(D()),t=Object(i.a)(e,2),n=t[0],r=M(t[1]),a=Object(i.a)(r,2),c=a[0],o=a[1];return{board:A(20,10),current:k(n),interval:750,level:1,next:k(c),position:b(3,0),randomizer:o,score:0,state:R.Paused}}!function(e){e[e.Paused=0]="Paused",e[e.Playing=1]="Playing",e[e.Won=2]="Won",e[e.Lost=3]="Lost"}(R||(R={})),function(e){e.MoveDown="down",e.MoveLeft="left",e.MoveRight="right",e.Reset="reset",e.Rotate="rotate",e.Start="start",e.Stop="stop",e.Tick="tick"}(L||(L={}));var S=P();function U(e,t){switch(t){case L.Tick:case L.MoveDown:var n=function(e,t,n,r,a,c){var o=b(r.x,r.y+1);if(Z(e,t,o))return[e,t,n,o,a,c];if(function(e){return 0===e.y}(r))return[e,t,n,r,a,R.Lost];var u=T(e,t,r,1),l=M(a),s=Object(i.a)(l,2),f=s[0],d=s[1],v=k(f),O=b(3,0);return[u,n,v,O,d,c]}(e.board,e.current,e.next,e.position,e.randomizer,e.state),r=Object(i.a)(n,6),a=r[0],c=r[1],o=r[2],u=r[3],s=r[4],f=r[5];return Object(l.a)({},e,{board:a,current:c,next:o,position:u,state:f,randomizer:s});case L.MoveLeft:return Object(l.a)({},e,{position:I(e.board,e.current,e.position)});case L.MoveRight:return Object(l.a)({},e,{position:J(e.board,e.current,e.position)});case L.Reset:return P();case L.Rotate:return Object(l.a)({},e,{current:z(e.board,e.current,e.position)});case L.Start:return Object(l.a)({},e,{state:R.Playing});case L.Stop:return Object(l.a)({},e,{state:R.Paused});default:return e}}function A(e,t){var n=Object(s.fill)(new Array(e*t),0,0);return{columns:t,fill:n,length:n.length}}function T(e,t,n,r){for(var a=x(t),c=function(e){return Object(l.a)({},e,{fill:e.fill.slice()})}(e),o=0;o<a.length;o++)for(var i=0;i<a[o].length;i++){if(0!==a[o][i])Y(c,B(e,b(n.x+i,n.y+o)),r)}return c}function I(e,t,n){var r=b(n.x-1,n.y);return Z(e,t,r)?r:n}function J(e,t,n){var r=b(n.x+1,n.y);return Z(e,t,r)?r:n}function z(e,t,n){var r=function(e){return Object(l.a)({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}(t);return Z(e,r,n)?r:t}function Z(e,t,n){for(var r=x(t),a=e.columns-1,c=e.length/e.columns-1,o=0;o<r.length;o++)for(var i=0;i<r[o].length;i++)if(0!==r[o][i]){if(n.x+i<0||n.x+i>a)return!1;if(n.y+o<0||n.y+o>c)return!1;if(1===W(e,B(e,b(n.x+i,n.y+o))))return!1}return!0}function B(e,t){return t.x+t.y*e.columns}function W(e,t){return e.fill[t]}function Y(e,t,n){e.fill[t]=n}function q(e){var t=e.board,n=e.colors,c=e.current,o=e.height,i=e.position,l=e.width,s=Object(r.useMemo)(function(){return function(e,t,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:n}}(t.columns,o,l)},[t.columns,o,l]),b=T(t,c,i,2);return a.a.createElement("div",{style:s},function(e,t){return e.fill.map(t)}(b,function(e,t){return a.a.createElement(u,{color:n[e],key:"".concat(t,"-").concat(e)})}))}function F(e){var t=e.board,n=e.children,r=e.current,c=e.position;return a.a.createElement("div",{style:H.container},a.a.createElement(q,{board:t,colors:G,current:r,height:400,position:c,width:200}),n)}var G={0:"black",1:"dodgerblue",2:"limegreen"},H={container:{position:"relative"}},K=A(5,5),N=b(1,1);function Q(e){var t=e.next;return a.a.createElement(q,{board:K,colors:V,current:t,height:100,position:N,width:100})}var V={0:"black",1:"dodgerblue",2:"yellow"};function X(e){var t=e.children,n=e.level,r=e.next,c=e.score;return a.a.createElement("div",null,a.a.createElement(Q,{next:r}),a.a.createElement("div",null,"Level: ",n),a.a.createElement("div",null,"Score: ",c),a.a.createElement("div",null,t))}function $(e){var t=e.dispatch,n=e.state,c=Object(r.useCallback)(function(){return t(L.Reset)},[t]);return a.a.createElement("div",{style:_.container},a.a.createElement(F,{board:n.board,current:n.current,position:n.position},a.a.createElement("span",{style:_.text},"You lost!")),a.a.createElement(X,{level:n.level,next:n.next,score:n.score},a.a.createElement("button",{onClick:c},"Reset")))}var _={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function ee(e,t){Object(r.useEffect)(function(){function n(n){n.key===e&&t(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[e,t])}function te(e){var t=e.dispatch,n=e.state,c=Object(r.useCallback)(function(){return t(L.Start)},[t]),o=Object(r.useCallback)(function(){return t(L.Reset)},[t]);return ee(" ",c),a.a.createElement("div",{style:ne.container},a.a.createElement(F,{board:n.board,current:n.current,position:n.position},a.a.createElement("span",{style:ne.text},"Paused")),a.a.createElement(X,{level:n.level,next:n.next,score:n.score},a.a.createElement("button",{onClick:c},"Start"),a.a.createElement("button",{onClick:o},"Reset")))}var ne={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function re(e){var t=e.dispatch,n=e.state,c=Object(r.useCallback)(function(){return t(L.Rotate)},[t]),o=Object(r.useCallback)(function(){return t(L.MoveDown)},[t]),i=Object(r.useCallback)(function(){return t(L.MoveLeft)},[t]),u=Object(r.useCallback)(function(){return t(L.MoveRight)},[t]),l=Object(r.useCallback)(function(){return t(L.Stop)},[t]),s=Object(r.useCallback)(function(){return t(L.Tick)},[t]);return ee("ArrowUp",c),ee("ArrowDown",o),ee("ArrowLeft",i),ee("ArrowRight",u),ee(" ",l),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=t},[t]),Object(r.useEffect)(function(){var t=setInterval(function(){n.current&&n.current()},e);return function(){return clearInterval(t)}},[e,t])}(n.interval,s),a.a.createElement("div",{style:ae.container},a.a.createElement(F,{board:n.board,current:n.current,position:n.position}),a.a.createElement(X,{level:n.level,next:n.next,score:n.score},a.a.createElement("button",{onClick:l},"Pause")))}var ae={container:{display:"flex"}};o.a.render(a.a.createElement(function(){var e=Object(r.useReducer)(U,S),t=Object(i.a)(e,2),n=t[0],c=t[1];switch(n.state){case R.Lost:return a.a.createElement($,{dispatch:c,state:n});case R.Paused:return a.a.createElement(te,{dispatch:c,state:n});case R.Playing:return a.a.createElement(re,{dispatch:c,state:n});default:return null}}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.d1b9434a.chunk.js.map