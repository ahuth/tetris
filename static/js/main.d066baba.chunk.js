(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),c=n(9),a=n.n(c),i=(n(16),n(2));function u(e){var t=e.color,n=o.a.useMemo(function(){return function(e){return{backgroundColor:e}}(t)},[t]);return o.a.createElement("div",{style:n})}var f=n(6);function b(e,t){return{x:e,y:t}}var l,s,v,O,j,d,p,h,m=n(10),w=n(0),g=n(3),y={L:"L",I:"I",T:"T",S:"S",Z:"Z",O:"O",J:"J"},x={Up:0,Right:1,Down:2,Left:3};function E(e){return{type:e,orientation:x.Up}}function L(e){return R[e.type][e.orientation]}var R=(h={},Object(w.a)(h,y.L,(l={},Object(w.a)(l,x.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(w.a)(l,x.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(w.a)(l,x.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(w.a)(l,x.Left,[[1,1,0],[0,1,0],[0,1,0]]),l)),Object(w.a)(h,y.I,(s={},Object(w.a)(s,x.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(w.a)(s,x.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(w.a)(s,x.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(w.a)(s,x.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),s)),Object(w.a)(h,y.T,(v={},Object(w.a)(v,x.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(w.a)(v,x.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(w.a)(v,x.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(w.a)(v,x.Left,[[0,1,0],[1,1,0],[0,1,0]]),v)),Object(w.a)(h,y.S,(O={},Object(w.a)(O,x.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(w.a)(O,x.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(w.a)(O,x.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(w.a)(O,x.Left,[[1,0,0],[1,1,0],[0,1,0]]),O)),Object(w.a)(h,y.Z,(j={},Object(w.a)(j,x.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(w.a)(j,x.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(w.a)(j,x.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(w.a)(j,x.Left,[[0,1,0],[1,1,0],[1,0,0]]),j)),Object(w.a)(h,y.O,(d={},Object(w.a)(d,x.Up,[[1,1],[1,1]]),Object(w.a)(d,x.Right,[[1,1],[1,1]]),Object(w.a)(d,x.Down,[[1,1],[1,1]]),Object(w.a)(d,x.Left,[[1,1],[1,1]]),d)),Object(w.a)(h,y.J,(p={},Object(w.a)(p,x.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(w.a)(p,x.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(w.a)(p,x.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(w.a)(p,x.Left,[[0,1,0],[0,1,0],[1,1,0]]),p)),h);function k(){return Object(f.shuffle)(Object.keys(y))}function D(e){var t=Object(m.a)(e),n=t[0],r=t.slice(1);return r.length>0?[n,r]:[n,k()]}function M(e,t){return Object(f.fill)(new Array(e*t),0,0)}function U(e,t,n,r,o){for(var c=L(t),a=e.slice(),i=0;i<c.length;i++)for(var u=0;u<c[i].length;u++){if(0!==c[i][u])a[J(b(n.x+u,n.y+i),o)]=r}return a}function T(e,t,n,r){var o=b(n.x-1,n.y);return A(e,t,o,r)?o:n}function I(e,t,n,r){var o=b(n.x+1,n.y);return A(e,t,o,r)?o:n}function S(e,t,n,r){var o=function(e){return Object(g.a)({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}(t);return A(e,o,n,r)?o:t}function A(e,t,n,r){for(var o=L(t),c=r-1,a=e.length/r-1,i=0;i<o.length;i++)for(var u=0;u<o[i].length;u++)if(0!==o[i][u]){if(n.x+u<0||n.x+u>c)return!1;if(n.y+i<0||n.y+i>a)return!1;if(1===e[J(b(n.x+u,n.y+i),r)])return!1}return!0}function J(e,t){return e.x+e.y*t}function z(e){var t=e.board,n=e.columns,r=e.current,c=e.height,a=e.position,i=e.width,f=o.a.useMemo(function(){return function(e,t,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:n}}(n,c,i)},[n,c,i]),b=U(t,r,a,2,n);return o.a.createElement("div",{style:f},b.map(function(e,t){return o.a.createElement(u,{color:Z[e],key:"".concat(t,"-").concat(e)})}))}var Z={0:"black",1:"dodgerblue",2:"limegreen"};function B(e){var t=e.board,n=e.current,r=e.position;return o.a.createElement(z,{board:t,columns:10,current:n,height:400,position:r,width:200})}var C=M(5,5),q=b(1,1);function F(e){var t=e.next;return o.a.createElement(z,{board:C,columns:5,current:t,height:100,position:q,width:100})}function G(e){var t=e.level,n=e.next,r=e.score;return o.a.createElement("div",null,o.a.createElement(F,{next:n}),o.a.createElement("div",null,"Level: ",t),o.a.createElement("div",null,"Score: ",r))}function H(e,t){o.a.useEffect(function(){function n(n){n.key===e&&t(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[e])}var K=D(k()),N=Object(i.a)(K,2),P=N[0],Q=D(N[1]),V=Object(i.a)(Q,2),W=V[0],X=V[1],Y={MoveDown:"down",MoveLeft:"left",MoveRight:"right",Reset:"reset",Rotate:"rotate",Start:"start",Stop:"stop",Tick:"tick"},$={board:M(20,10),current:E(P),interval:750,level:1,next:E(W),position:b(3,0),randomizer:X,score:0,state:0};function _(e,t){switch(t){case Y.Tick:case Y.MoveDown:var n=function(e,t,n,r,o,c){var a=b(r.x,r.y+1);if(A(e,t,a,c))return[e,t,n,a,o];var u=U(e,t,r,1,c),f=D(o),l=Object(i.a)(f,2),s=l[0],v=l[1];return[u,n,E(s),b(3,0),v]}(e.board,e.current,e.next,e.position,e.randomizer,10),r=Object(i.a)(n,5),o=r[0],c=r[1],a=r[2],u=r[3],f=r[4];return Object(g.a)({},e,{board:o,current:c,next:a,position:u,randomizer:f});case Y.MoveLeft:return Object(g.a)({},e,{position:T(e.board,e.current,e.position,10)});case Y.MoveRight:return Object(g.a)({},e,{position:I(e.board,e.current,e.position,10)});case Y.Rotate:return Object(g.a)({},e,{current:S(e.board,e.current,e.position,10)});default:return e}}var ee={container:{display:"flex"}};a.a.render(o.a.createElement(function(){var e=o.a.useReducer(_,$),t=Object(i.a)(e,2),n=t[0],r=t[1];return H("ArrowUp",function(){return r(Y.Rotate)}),H("ArrowDown",function(){return r(Y.MoveDown)}),H("ArrowLeft",function(){return r(Y.MoveLeft)}),H("ArrowRight",function(){return r(Y.MoveRight)}),function(e,t){var n=o.a.useRef();o.a.useEffect(function(){n.current=t},[t]),o.a.useEffect(function(){if(null!=e){var t=setInterval(function(){n.current()},e);return function(){return clearInterval(t)}}},[e])}(n.interval,function(){return r(Y.Tick)}),o.a.createElement("div",{style:ee.container},o.a.createElement(B,{board:n.board,current:n.current,position:n.position}),o.a.createElement(G,{level:n.level,next:n.next,score:n.score}))}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.d066baba.chunk.js.map