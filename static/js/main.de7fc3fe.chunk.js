(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(9),a=n.n(o),i=(n(16),n(3));function u(e){var t=e.color,n=Object(r.useMemo)(function(){return function(e){return{backgroundColor:e}}(t)},[t]);return c.a.createElement("div",{style:n})}var l=n(2),s=n(6);function f(e,t){return{x:e,y:t}}var b,O,d,v,j,p,h,m,g,w,y=n(10),E=n(1);function x(e){return{type:e,orientation:w.Up}}function k(e){return D[e.type][e.orientation]}!function(e){e.L="L",e.I="I",e.T="T",e.S="S",e.Z="Z",e.O="O",e.J="J"}(g||(g={})),function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(w||(w={}));var L,R,D=(m={},Object(E.a)(m,g.L,(b={},Object(E.a)(b,w.Up,[[0,0,1],[1,1,1],[0,0,0]]),Object(E.a)(b,w.Right,[[0,1,0],[0,1,0],[0,1,1]]),Object(E.a)(b,w.Down,[[0,0,0],[1,1,1],[1,0,0]]),Object(E.a)(b,w.Left,[[1,1,0],[0,1,0],[0,1,0]]),b)),Object(E.a)(m,g.I,(O={},Object(E.a)(O,w.Up,[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]),Object(E.a)(O,w.Right,[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]),Object(E.a)(O,w.Down,[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]]),Object(E.a)(O,w.Left,[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]),O)),Object(E.a)(m,g.T,(d={},Object(E.a)(d,w.Up,[[0,1,0],[1,1,1],[0,0,0]]),Object(E.a)(d,w.Right,[[0,1,0],[0,1,1],[0,1,0]]),Object(E.a)(d,w.Down,[[0,0,0],[1,1,1],[0,1,0]]),Object(E.a)(d,w.Left,[[0,1,0],[1,1,0],[0,1,0]]),d)),Object(E.a)(m,g.S,(v={},Object(E.a)(v,w.Up,[[0,1,1],[1,1,0],[0,0,0]]),Object(E.a)(v,w.Right,[[0,1,0],[0,1,1],[0,0,1]]),Object(E.a)(v,w.Down,[[0,0,0],[0,1,1],[1,1,0]]),Object(E.a)(v,w.Left,[[1,0,0],[1,1,0],[0,1,0]]),v)),Object(E.a)(m,g.Z,(j={},Object(E.a)(j,w.Up,[[1,1,0],[0,1,1],[0,0,0]]),Object(E.a)(j,w.Right,[[0,0,1],[0,1,1],[0,1,0]]),Object(E.a)(j,w.Down,[[0,0,0],[1,1,0],[0,1,1]]),Object(E.a)(j,w.Left,[[0,1,0],[1,1,0],[1,0,0]]),j)),Object(E.a)(m,g.O,(p={},Object(E.a)(p,w.Up,[[1,1],[1,1]]),Object(E.a)(p,w.Right,[[1,1],[1,1]]),Object(E.a)(p,w.Down,[[1,1],[1,1]]),Object(E.a)(p,w.Left,[[1,1],[1,1]]),p)),Object(E.a)(m,g.J,(h={},Object(E.a)(h,w.Up,[[1,0,0],[1,1,1],[0,0,0]]),Object(E.a)(h,w.Right,[[0,1,1],[0,1,0],[0,1,0]]),Object(E.a)(h,w.Down,[[0,0,0],[1,1,1],[0,0,1]]),Object(E.a)(h,w.Left,[[0,1,0],[0,1,0],[1,1,0]]),h)),m);function M(){return Object(s.shuffle)(Object.keys(g))}function U(e){var t=Object(y.a)(e),n=t[0],r=t.slice(1);return r.length>0?[n,r]:[n,M()]}function C(){var e=U(M()),t=Object(i.a)(e,2),n=t[0],r=U(t[1]),c=Object(i.a)(r,2),o=c[0],a=c[1];return{board:A(20,10),current:x(n),interval:750,level:1,next:x(o),position:f(3,0),randomizer:a,score:0,state:L.Playing}}!function(e){e[e.Playing=0]="Playing",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(L||(L={})),function(e){e.MoveDown="down",e.MoveLeft="left",e.MoveRight="right",e.Reset="reset",e.Rotate="rotate",e.Start="start",e.Stop="stop",e.Tick="tick"}(R||(R={}));var S=C();function T(e,t){switch(t){case R.Tick:case R.MoveDown:var n=function(e,t,n,r,c,o){var a=f(r.x,r.y+1);if(Z(e,t,a))return[e,t,n,a,c,o];if(function(e){return 0===e.y}(r))return[e,t,n,r,c,L.Lost];var u=I(e,t,r,1),l=U(c),s=Object(i.a)(l,2),b=s[0],O=s[1],d=x(b),v=f(3,0);return[u,n,d,v,O,o]}(e.board,e.current,e.next,e.position,e.randomizer,e.state),r=Object(i.a)(n,6),c=r[0],o=r[1],a=r[2],u=r[3],s=r[4],b=r[5];return Object(l.a)({},e,{board:c,current:o,next:a,position:u,state:b,randomizer:s});case R.MoveLeft:return Object(l.a)({},e,{position:J(e.board,e.current,e.position)});case R.MoveRight:return Object(l.a)({},e,{position:P(e.board,e.current,e.position)});case R.Reset:return C();case R.Rotate:return Object(l.a)({},e,{current:z(e.board,e.current,e.position)});case R.Start:return Object(l.a)({},e,{state:L.Playing});default:return e}}function A(e,t){var n=Object(s.fill)(new Array(e*t),0,0);return{columns:t,fill:n,length:n.length}}function I(e,t,n,r){for(var c=k(t),o=function(e){return Object(l.a)({},e,{fill:e.fill.slice()})}(e),a=0;a<c.length;a++)for(var i=0;i<c[a].length;i++){if(0!==c[a][i])Y(o,B(e,f(n.x+i,n.y+a)),r)}return o}function J(e,t,n){var r=f(n.x-1,n.y);return Z(e,t,r)?r:n}function P(e,t,n){var r=f(n.x+1,n.y);return Z(e,t,r)?r:n}function z(e,t,n){var r=function(e){return Object(l.a)({},e,{orientation:(t=e.orientation,(t+1)%4)});var t}(t);return Z(e,r,n)?r:t}function Z(e,t,n){for(var r=k(t),c=e.columns-1,o=e.length/e.columns-1,a=0;a<r.length;a++)for(var i=0;i<r[a].length;i++)if(0!==r[a][i]){if(n.x+i<0||n.x+i>c)return!1;if(n.y+a<0||n.y+a>o)return!1;if(1===W(e,B(e,f(n.x+i,n.y+a))))return!1}return!0}function B(e,t){return t.x+t.y*e.columns}function W(e,t){return e.fill[t]}function Y(e,t,n){e.fill[t]=n}function q(e){var t=e.board,n=e.colors,o=e.current,a=e.height,i=e.position,l=e.width,s=Object(r.useMemo)(function(){return function(e,t,n){return{borderBottom:"1px solid grey",display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),height:t,width:n}}(t.columns,a,l)},[t.columns,a,l]),f=I(t,o,i,2);return c.a.createElement("div",{style:s},function(e,t){return e.fill.map(t)}(f,function(e,t){return c.a.createElement(u,{color:n[e],key:"".concat(t,"-").concat(e)})}))}function F(e){var t=e.board,n=e.children,r=e.current,o=e.position;return c.a.createElement("div",{style:H.container},c.a.createElement(q,{board:t,colors:G,current:r,height:400,position:o,width:200}),n)}var G={0:"black",1:"dodgerblue",2:"limegreen"},H={container:{position:"relative"}},K=A(5,5),N=f(1,1);function Q(e){var t=e.next;return c.a.createElement(q,{board:K,colors:V,current:t,height:100,position:N,width:100})}var V={0:"black",1:"dodgerblue",2:"yellow"};function X(e){var t=e.children,n=e.level,r=e.next,o=e.score;return c.a.createElement("div",null,c.a.createElement(Q,{next:r}),c.a.createElement("div",null,"Level: ",n),c.a.createElement("div",null,"Score: ",o),c.a.createElement("div",null,t))}function $(e,t){Object(r.useEffect)(function(){function n(n){n.key===e&&t(n)}return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}},[e,t])}function _(e){var t=e.dispatch,n=e.state,o=Object(r.useCallback)(function(){return t(R.Reset)},[t]);return $(" ",o),c.a.createElement("div",{style:ee.container},c.a.createElement(F,{board:n.board,current:n.current,position:n.position},c.a.createElement("span",{style:ee.text},"You lost!")),c.a.createElement(X,{level:n.level,next:n.next,score:n.score},c.a.createElement("button",{onClick:o},"Reset")))}var ee={container:{display:"flex"},text:{backgroundColor:"whitesmoke",color:"black",display:"block",position:"absolute",textAlign:"center",top:"50%",width:"100%"}};function te(e){var t=e.dispatch,n=e.state,o=Object(r.useCallback)(function(){return t(R.Rotate)},[t]),a=Object(r.useCallback)(function(){return t(R.MoveDown)},[t]),i=Object(r.useCallback)(function(){return t(R.MoveLeft)},[t]),u=Object(r.useCallback)(function(){return t(R.MoveRight)},[t]),l=Object(r.useCallback)(function(){return t(R.Tick)},[t]);return $("ArrowUp",o),$("ArrowDown",a),$("ArrowLeft",i),$("ArrowRight",u),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=t},[t]),Object(r.useEffect)(function(){var t=setInterval(function(){n.current&&n.current()},e);return function(){return clearInterval(t)}},[e,t])}(n.interval,l),c.a.createElement("div",{style:ne.container},c.a.createElement(F,{board:n.board,current:n.current,position:n.position}),c.a.createElement(X,{level:n.level,next:n.next,score:n.score}))}var ne={container:{display:"flex"}};a.a.render(c.a.createElement(function(){var e=Object(r.useReducer)(T,S),t=Object(i.a)(e,2),n=t[0],o=t[1];switch(n.state){case L.Lost:return c.a.createElement(_,{dispatch:o,state:n});case L.Playing:return c.a.createElement(te,{dispatch:o,state:n});default:return null}}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.de7fc3fe.chunk.js.map